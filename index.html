<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Markets - Real-Time Stock Trading Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'SF Pro Display', sans-serif;
            background: #0d1117;
            color: #f0f6fc;
            overflow-x: hidden;
            font-size: 14px;
            line-height: 1.5;
        }

        .container {
            max-width: 100vw;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Navigation */
        .header {
            background: #161b22;
            border-bottom: 1px solid #30363d;
            padding: 12px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 20px;
            font-weight: 700;
            color: #58a6ff;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .theme-toggle {
            background: #21262d;
            border: 1px solid #30363d;
            color: #f0f6fc;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            background: #30363d;
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            height: calc(100vh - 60px);
            gap: 1px;
            background: #30363d;
        }

        /* Left Sidebar - Watchlist */
        .watchlist-panel {
            background: #0d1117;
            overflow-y: auto;
            border-right: 1px solid #30363d;
        }

        .watchlist-header {
            padding: 20px 16px 16px 16px;
            border-bottom: 1px solid #21262d;
            position: sticky;
            top: 0;
            background: #0d1117;
            z-index: 100;
        }

        .watchlist-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #f0f6fc;
        }

        .market-status {
            font-size: 12px;
            color: #7c3aed;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .stock-list {
            padding: 8px 0;
        }

        .stock-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            color: inherit;
        }

        .stock-item:hover {
            background: #161b22;
        }

        .stock-item.active {
            background: #1f2937;
            border-left: 3px solid #58a6ff;
        }

        .stock-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .stock-symbol {
            font-size: 14px;
            font-weight: 600;
            color: #f0f6fc;
        }

        .stock-name {
            font-size: 11px;
            color: #8b949e;
        }

        .stock-price-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 2px;
        }

        .stock-price {
            font-size: 14px;
            font-weight: 600;
            color: #f0f6fc;
        }

        .stock-change {
            font-size: 11px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 2px;
        }

        .change-positive {
            color: #10b981;
        }

        .change-negative {
            color: #f87171;
        }

        .change-neutral {
            color: #8b949e;
        }

        /* Center - Chart Area */
        .chart-panel {
            background: #0d1117;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chart-header {
            padding: 20px 24px 16px 24px;
            border-bottom: 1px solid #21262d;
        }

        .current-stock-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .current-stock-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .current-symbol {
            font-size: 24px;
            font-weight: 700;
            color: #f0f6fc;
        }

        .current-company {
            font-size: 14px;
            color: #8b949e;
        }

        .current-price {
            font-size: 32px;
            font-weight: 600;
            margin: 8px 0 4px 0;
        }

        .current-change {
            font-size: 16px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .benchmark-comparison {
            font-size: 12px;
            color: #8b949e;
            margin-top: 8px;
        }

        /* Chart Controls */
        .chart-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            border-bottom: 1px solid #21262d;
        }

        .timeframe-selector {
            display: flex;
            background: #21262d;
            border-radius: 6px;
            padding: 2px;
        }

        .timeframe-btn {
            background: none;
            border: none;
            color: #8b949e;
            font-size: 12px;
            font-weight: 500;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .timeframe-btn.active {
            background: #58a6ff;
            color: #ffffff;
        }

        .chart-options {
            display: flex;
            gap: 12px;
        }

        .chart-option-btn {
            background: #21262d;
            border: 1px solid #30363d;
            color: #f0f6fc;
            font-size: 11px;
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .chart-option-btn:hover {
            background: #30363d;
        }

        .chart-option-btn.active {
            background: #58a6ff;
            border-color: #58a6ff;
        }

        /* Main Chart Container */
        .chart-container {
            flex: 1;
            position: relative;
            margin: 0 24px 16px 24px;
            background: #0d1117;
            border-radius: 8px;
            overflow: hidden;
            min-height: 400px;
        }

        .price-chart {
            width: 100%;
            height: 100%;
            position: relative;
            padding: 20px;
        }

        .candlestick-chart {
            position: absolute;
            top: 20px;
            left: 60px;
            right: 80px;
            bottom: 120px;
            display: flex;
            align-items: flex-end;
            gap: 1px;
        }

        .candle {
            flex: 1;
            position: relative;
            cursor: crosshair;
            min-width: 2px;
        }

        .candle-wick {
            width: 1px;
            background: #6b7280;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .candle-body {
            width: 100%;
            border-radius: 1px;
            position: relative;
            min-height: 1px;
        }

        .candle-green {
            background: #10b981;
            border: 1px solid #059669;
        }

        .candle-red {
            background: #ef4444;
            border: 1px solid #dc2626;
        }

        .candle-blue {
            background: #3b82f6;
            border: 1px solid #2563eb;
        }

        /* Price Grid */
        .price-grid {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            bottom: 120px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .price-label {
            font-size: 10px;
            color: #6b7280;
            text-align: right;
            font-variant-numeric: tabular-nums;
        }

        /* Time Grid */
        .time-grid {
            position: absolute;
            bottom: 80px;
            left: 60px;
            right: 80px;
            height: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .time-label {
            font-size: 10px;
            color: #6b7280;
        }

        /* Volume Chart */
        .volume-chart {
            position: absolute;
            bottom: 20px;
            left: 60px;
            right: 80px;
            height: 50px;
            display: flex;
            align-items: flex-end;
            gap: 1px;
        }

        .volume-bar {
            flex: 1;
            border-radius: 1px 1px 0 0;
            opacity: 0.7;
            min-width: 1px;
        }

        /* RSI Indicator */
        .rsi-container {
            margin: 0 24px 16px 24px;
            height: 80px;
            background: #0d1117;
            border-radius: 8px;
            position: relative;
            border: 1px solid #21262d;
        }

        .rsi-header {
            position: absolute;
            top: 8px;
            left: 16px;
            font-size: 11px;
            color: #8b949e;
            font-weight: 500;
        }

        .rsi-chart {
            position: absolute;
            top: 24px;
            left: 60px;
            right: 80px;
            bottom: 8px;
            display: flex;
            align-items: flex-end;
            gap: 1px;
        }

        .rsi-bar {
            flex: 1;
            background: #7c3aed;
            border-radius: 1px 1px 0 0;
            min-width: 1px;
        }

        .rsi-levels {
            position: absolute;
            top: 24px;
            right: 20px;
            bottom: 8px;
            width: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .rsi-level {
            font-size: 9px;
            color: #6b7280;
            text-align: right;
        }

        /* Right Sidebar - Stock Details */
        .details-panel {
            background: #0d1117;
            border-left: 1px solid #30363d;
            overflow-y: auto;
            padding: 20px 16px;
        }

        .details-section {
            margin-bottom: 24px;
        }

        .details-title {
            font-size: 16px;
            font-weight: 600;
            color: #f0f6fc;
            margin-bottom: 12px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #21262d;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            font-size: 12px;
            color: #8b949e;
        }

        .stat-value {
            font-size: 12px;
            color: #f0f6fc;
            font-weight: 500;
            font-variant-numeric: tabular-nums;
        }

        /* Analyst Ratings */
        .analyst-section {
            background: #161b22;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .rating-distribution {
            display: flex;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .rating-buy {
            background: #10b981;
        }

        .rating-hold {
            background: #f59e0b;
        }

        .rating-sell {
            background: #ef4444;
        }

        .rating-labels {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #8b949e;
        }

        /* News Section */
        .news-section {
            background: #161b22;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .news-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #21262d;
        }

        .news-item:last-child {
            border-bottom: none;
        }

        .news-icon {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
            color: #ffffff;
        }

        .news-content {
            flex: 1;
        }

        .news-title {
            font-size: 13px;
            font-weight: 500;
            color: #f0f6fc;
            margin-bottom: 4px;
            line-height: 1.3;
        }

        .news-description {
            font-size: 11px;
            color: #8b949e;
            line-height: 1.4;
            margin-bottom: 4px;
        }

        .news-time {
            font-size: 10px;
            color: #6b7280;
        }

        /* Sector Heatmap */
        .heatmap-section {
            background: #161b22;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .heatmap-item {
            background: #21262d;
            border-radius: 6px;
            padding: 12px 8px;
            text-align: center;
            border-left: 3px solid;
        }

        .heatmap-tech {
            border-left-color: #3b82f6;
        }

        .heatmap-auto {
            border-left-color: #10b981;
        }

        .heatmap-infra {
            border-left-color: #f59e0b;
        }

        .heatmap-label {
            font-size: 10px;
            color: #8b949e;
            margin-bottom: 2px;
        }

        .heatmap-value {
            font-size: 12px;
            font-weight: 600;
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            background: rgba(22, 27, 34, 0.95);
            backdrop-filter: blur(10px);
            color: #f0f6fc;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 11px;
            pointer-events: none;
            z-index: 2000;
            display: none;
            border: 1px solid #30363d;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            min-width: 200px;
        }

        .tooltip-header {
            font-weight: 600;
            margin-bottom: 8px;
            color: #58a6ff;
            font-size: 12px;
        }

        .tooltip-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .tooltip-row:last-child {
            margin-bottom: 0;
        }

        .tooltip-label {
            color: #8b949e;
        }

        .tooltip-value {
            color: #f0f6fc;
            font-weight: 500;
            font-variant-numeric: tabular-nums;
        }

        /* Technical Indicators Panel */
        .indicators-panel {
            background: #161b22;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .indicator-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #21262d;
        }

        .indicator-toggle:last-child {
            border-bottom: none;
        }

        .indicator-name {
            font-size: 12px;
            color: #f0f6fc;
        }

        .toggle-switch {
            position: relative;
            width: 36px;
            height: 20px;
            background: #30363d;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: #58a6ff;
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background: #f0f6fc;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(16px);
        }

        /* Bottom Ticker */
        .ticker-container {
            background: #161b22;
            border-top: 1px solid #30363d;
            height: 40px;
            overflow: hidden;
            position: relative;
        }

        .ticker-scroll {
            display: flex;
            align-items: center;
            height: 100%;
            animation: scroll 60s linear infinite;
            white-space: nowrap;
        }

        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .ticker-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-right: 32px;
            font-size: 12px;
            font-weight: 500;
        }

        /* Admin Panel */
        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .admin-panel {
            background: #161b22;
            border-radius: 12px;
            padding: 24px;
            max-width: 400px;
            width: 90%;
            border: 1px solid #30363d;
        }

        .admin-title {
            font-size: 18px;
            font-weight: 600;
            color: #f0f6fc;
            margin-bottom: 20px;
            text-align: center;
        }

        .admin-input {
            width: 100%;
            background: #0d1117;
            border: 1px solid #30363d;
            color: #f0f6fc;
            padding: 12px 16px;
            border-radius: 6px;
            font-size: 14px;
            margin-bottom: 16px;
            text-align: center;
        }

        .admin-input::placeholder {
            color: #6b7280;
        }

        .admin-buttons {
            display: flex;
            gap: 12px;
        }

        .admin-btn {
            flex: 1;
            background: #58a6ff;
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .admin-btn:hover {
            background: #4c94f0;
        }

        .admin-btn.cancel {
            background: #ef4444;
        }

        .admin-btn.cancel:hover {
            background: #dc2626;
        }

        /* Branding */
        .branding {
            position: fixed;
            bottom: 16px;
            right: 16px;
            font-size: 10px;
            color: #6b7280;
            cursor: pointer;
            user-select: none;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }

        .branding:hover {
            opacity: 1;
        }

        /* Support/Resistance Lines */
        .support-line, .resistance-line {
            position: absolute;
            left: 60px;
            right: 80px;
            height: 1px;
            border-top: 1px dashed;
            pointer-events: none;
        }

        .support-line {
            border-color: #ef4444;
        }

        .resistance-line {
            border-color: #10b981;
        }

        .support-label, .resistance-label {
            position: absolute;
            right: -75px;
            top: -8px;
            font-size: 9px;
            color: #6b7280;
            background: #0d1117;
            padding: 2px 4px;
            border-radius: 2px;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr;
            }
            
            .watchlist-panel {
                display: none;
            }
            
            .details-panel {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 8px 16px;
            }
            
            .chart-header {
                padding: 16px;
            }
            
            .chart-controls {
                padding: 12px 16px;
            }
            
            .chart-container {
                margin: 0 16px 12px 16px;
            }
            
            .rsi-container {
                margin: 0 16px 12px 16px;
            }
            
            .current-symbol {
                font-size: 20px;
            }
            
            .current-price {
                font-size: 24px;
            }
        }

        /* Loading States */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        /* Focus States */
        button:focus {
            outline: 2px solid #58a6ff;
            outline-offset: 2px;
        }

        /* Selection */
        ::selection {
            background: rgba(88, 166, 255, 0.3);
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #0d1117;
        }

        ::-webkit-scrollbar-thumb {
            background: #30363d;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #484f58;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Navigation -->
        <header class="header">
            <div class="logo">Financial Markets</div>
            <div class="header-controls">
                <button class="theme-toggle" onclick="toggleTheme()">Dark Mode</button>
                <div class="admin-trigger" onclick="handleAdminClick()" style="width: 20px; height: 20px; cursor: pointer; opacity: 0.1;">⚙</div>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Left Sidebar - Watchlist -->
            <div class="watchlist-panel">
                <div class="watchlist-header">
                    <h2 class="watchlist-title">Watchlist</h2>
                    <div class="market-status">
                        <span class="status-indicator"></span>
                        Market Open
                    </div>
                </div>
                
                <div class="stock-list">
                    <button class="stock-item active" data-stock="DZRA">
                        <div class="stock-info">
                            <div class="stock-symbol">DZRA</div>
                            <div class="stock-name">Dozera Group</div>
                        </div>
                        <div class="stock-price-info">
                            <div class="stock-price">$24.10</div>
                            <div class="stock-change change-negative">
                                ▼ $0.90 (3.60%)
                            </div>
                        </div>
                    </button>
                    
                    <button class="stock-item" data-stock="VRZO">
                        <div class="stock-info">
                            <div class="stock-symbol">VRZO</div>
                            <div class="stock-name">Vorzo</div>
                        </div>
                        <div class="stock-price-info">
                            <div class="stock-price">$22.00</div>
                            <div class="stock-change change-negative">
                                ▼ $1.50 (6.38%)
                            </div>
                        </div>
                    </button>
                    
                    <button class="stock-item" data-stock="ORIN">
                        <div class="stock-info">
                            <div class="stock-symbol">ORIN</div>
                            <div class="stock-name">Oriontec</div>
                        </div>
                        <div class="stock-price-info">
                            <div class="stock-price">$19.50</div>
                            <div class="stock-change change-negative">
                                ▼ $0.25 (1.27%)
                            </div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Center - Chart Area -->
            <div class="chart-panel">
                <div class="chart-header">
                    <div class="current-stock-header">
                        <div class="current-stock-info">
                            <div class="current-symbol" id="currentSymbol">DZRA</div>
                            <div class="current-company" id="currentCompany">Dozera Group</div>
                            <div class="current-price change-negative" id="currentPrice">$24.10 USD</div>
                            <div class="current-change change-negative" id="currentChange">
                                ▼ $0.90 (3.60%) Today
                            </div>
                            <div class="benchmark-comparison" id="benchmarkComparison">
                                Compared to Nasdaq ▼0.6%, DZRA ▲2.4% today
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-controls">
                    <div class="timeframe-selector">
                        <button class="timeframe-btn active" data-timeframe="1D">1D</button>
                        <button class="timeframe-btn" data-timeframe="5D">5D</button>
                        <button class="timeframe-btn" data-timeframe="1M">1M</button>
                        <button class="timeframe-btn" data-timeframe="6M">6M</button>
                        <button class="timeframe-btn" data-timeframe="1Y">1Y</button>
                    </div>
                    <div class="chart-options">
                        <button class="chart-option-btn active">Candlestick</button>
                        <button class="chart-option-btn">Line</button>
                        <button class="chart-option-btn">Area</button>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="price-chart">
                        <div class="candlestick-chart" id="candlestickChart"></div>
                        <div class="price-grid" id="priceGrid">
                            <div class="price-label">$45.00</div>
                            <div class="price-label">$40.00</div>
                            <div class="price-label">$35.00</div>
                            <div class="price-label">$30.00</div>
                            <div class="price-label">$25.00</div>
                            <div class="price-label">$20.00</div>
                            <div class="price-label">$15.00</div>
                        </div>
                        <div class="time-grid" id="timeGrid">
                            <div class="time-label">9:30</div>
                            <div class="time-label">11:00</div>
                            <div class="time-label">12:30</div>
                            <div class="time-label">2:00</div>
                            <div class="time-label">4:00</div>
                        </div>
                        <div class="volume-chart" id="volumeChart"></div>
                        
                        <!-- Support/Resistance Lines -->
                        <div class="support-line" style="bottom: 180px;">
                            <div class="support-label">Support $18.00</div>
                        </div>
                        <div class="resistance-line" style="bottom: 280px;">
                            <div class="resistance-label">Resistance $27.00</div>
                        </div>
                    </div>
                </div>

                <div class="rsi-container">
                    <div class="rsi-header">RSI (14)</div>
                    <div class="rsi-chart" id="rsiChart"></div>
                    <div class="rsi-levels">
                        <div class="rsi-level">70</div>
                        <div class="rsi-level">50</div>
                        <div class="rsi-level">30</div>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar - Details -->
            <div class="details-panel">
                <div class="details-section">
                    <h3 class="details-title">Statistics</h3>
                    <div class="stat-row">
                        <span class="stat-label">Market Cap</span>
                        <span class="stat-value" id="marketCap">$1.71B</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">P/E Ratio</span>
                        <span class="stat-value" id="peRatio">18.45</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Volume</span>
                        <span class="stat-value" id="volume">2.1M</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Avg Volume</span>
                        <span class="stat-value" id="avgVolume">2.1M</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">52W High</span>
                        <span class="stat-value" id="weekHigh">$25.00</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">52W Low</span>
                        <span class="stat-value" id="weekLow">$12.50</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Earnings Date</span>
                        <span class="stat-value" id="earningsDate">Feb 15, 2024</span>
                    </div>
                </div>

                <div class="analyst-section">
                    <h3 class="details-title">Analyst Ratings</h3>
                    <div class="rating-distribution">
                        <div class="rating-buy" style="flex: 0.65;"></div>
                        <div class="rating-hold" style="flex: 0.28;"></div>
                        <div class="rating-sell" style="flex: 0.07;"></div>
                    </div>
                    <div class="rating-labels">
                        <span>65% Buy</span>
                        <span>28% Hold</span>
                        <span>7% Sell</span>
                    </div>
                </div>

                <div class="heatmap-section">
                    <h3 class="details-title">Sector Performance</h3>
                    <div class="heatmap-grid">
                        <div class="heatmap-item heatmap-tech">
                            <div class="heatmap-label">Tech</div>
                            <div class="heatmap-value change-positive">+2.4%</div>
                        </div>
                        <div class="heatmap-item heatmap-auto">
                            <div class="heatmap-label">Auto</div>
                            <div class="heatmap-value change-positive">+1.8%</div>
                        </div>
                        <div class="heatmap-item heatmap-infra">
                            <div class="heatmap-label">Infra</div>
                            <div class="heatmap-value change-negative">-0.5%</div>
                        </div>
                    </div>
                </div>

                <div class="indicators-panel">
                    <h3 class="details-title">Technical Indicators</h3>
                    <div class="indicator-toggle">
                        <span class="indicator-name">RSI</span>
                        <div class="toggle-switch active" data-indicator="rsi">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="indicator-toggle">
                        <span class="indicator-name">MACD</span>
                        <div class="toggle-switch" data-indicator="macd">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="indicator-toggle">
                        <span class="indicator-name">Bollinger Bands</span>
                        <div class="toggle-switch" data-indicator="bollinger">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="indicator-toggle">
                        <span class="indicator-name">VWAP</span>
                        <div class="toggle-switch" data-indicator="vwap">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="indicator-toggle">
                        <span class="indicator-name">Fibonacci</span>
                        <div class="toggle-switch" data-indicator="fibonacci">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>

                <div class="news-section">
                    <h3 class="details-title">Recent News</h3>
                    <div class="news-item">
                        <div class="news-icon" style="background: #10b981;">Q2</div>
                        <div class="news-content">
                            <div class="news-title">Q2 Earnings Beat Expectations</div>
                            <div class="news-description">Revenue up 15% year-over-year with strong infrastructure demand</div>
                            <div class="news-time">2 hours ago • Mumbai</div>
                        </div>
                    </div>
                    <div class="news-item">
                        <div class="news-icon" style="background: #3b82f6;">FAC</div>
                        <div class="news-content">
                            <div class="news-title">New Manufacturing Facility</div>
                            <div class="news-description">$50M investment in advanced production capabilities</div>
                            <div class="news-time">5 hours ago • Delhi</div>
                        </div>
                    </div>
                    <div class="news-item">
                        <div class="news-icon" style="background: #f59e0b;">DEAL</div>
                        <div class="news-content">
                            <div class="news-title">Software Partnership Announced</div>
                            <div class="news-description">Strategic alliance with major tech company</div>
                            <div class="news-time">1 day ago • Bangalore</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Ticker -->
        <div class="ticker-container">
            <div class="ticker-scroll">
                <div class="ticker-item">
                    <span>DZRA</span>
                    <span class="change-negative">$24.10 ▼4.3%</span>
                </div>
                <div class="ticker-item">
                    <span>VRZO</span>
                    <span class="change-negative">$22.00 ▼6.4%</span>
                </div>
                <div class="ticker-item">
                    <span>ORIN</span>
                    <span class="change-negative">$19.50 ▼1.3%</span>
                </div>
                <div class="ticker-item">
                    <span>S&P 500</span>
                    <span class="change-positive">4,185.47 ▲0.8%</span>
                </div>
                <div class="ticker-item">
                    <span>NASDAQ</span>
                    <span class="change-negative">12,965.34 ▼0.6%</span>
                </div>
                <div class="ticker-item">
                    <span>NIFTY 50</span>
                    <span class="change-positive">19,674.25 ▲1.2%</span>
                </div>
            </div>
        </div>

        <!-- Tooltip -->
        <div class="tooltip" id="tooltip"></div>

        <!-- Admin Panel -->
        <div class="admin-overlay" id="adminOverlay">
            <div class="admin-panel">
                <div class="admin-title">Admin Access</div>
                <input type="password" class="admin-input" id="adminCode" placeholder="Enter Access Code" maxlength="10">
                <div class="admin-buttons">
                    <button class="admin-btn" onclick="verifyAdmin()">Login</button>
                    <button class="admin-btn cancel" onclick="closeAdminPanel()">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Branding -->
        <div class="branding">Powered by Oriontec Charts™</div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCCWB4adPUSrSW2cSd9I3oqYIw65ZnStj4",
            authDomain: "twitter-1903a.firebaseapp.com",
            databaseURL: "https://twitter-1903a-default-rtdb.firebaseio.com",
            projectId: "twitter-1903a",
            storageBucket: "twitter-1903a.firebasestorage.app",
            messagingSenderId: "37758914989",
            appId: "1:37758914989:web:6c364d74288a8b08f8d124"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // Global synchronized state
        let globalMarketState = {
            lastUpdate: Date.now(),
            sessionId: Date.now() + Math.random(),
            marketTrend: 'bearish', // 'bullish', 'bearish', 'neutral'
            volatilityLevel: 'normal', // 'low', 'normal', 'high', 'extreme'
            marketSession: 'open' // 'open', 'closed', 'premarket', 'afterhours'
        };
        
        // Stock data with realistic financial metrics
        const stockData = {
            DZRA: {
                symbol: "DZRA",
                name: "Dozera Group",
                currentPrice: 24.10,
                change: -0.90,
                changePercent: -3.60,
                marketCap: "$1.71B",
                peRatio: "18.45",
                volume: "2.1M",
                avgVolume: "2.1M",
                weekHigh: "$25.00",
                weekLow: "$12.50",
                earningsDate: "Feb 15, 2024",
                sector: "Infrastructure",
                analystRatings: { buy: 65, hold: 28, sell: 7 },
                supportLevel: 18.00,
                resistanceLevel: 27.00,
                rsi: 45.2,
                beta: 1.15,
                timeframes: {
                    '1D': generateRealisticCandleData(24.10, 'current_day', 78),
                    '5D': generateRealisticCandleData(24.10, 'week_decline', 390),
                    '1M': generateRealisticCandleData(40.00, 'surge_pattern', 30),
                    '6M': generateRealisticCandleData(24.10, 'recovery', 180),
                    '1Y': generateRealisticCandleData(24.10, 'yearly_trend', 365)
                }
            },
            VRZO: {
                symbol: "VRZO",
                name: "Vorzo",
                currentPrice: 22.00,
                change: -1.50,
                changePercent: -6.38,
                marketCap: "$1.78B",
                peRatio: "N/A",
                volume: "3.5M",
                avgVolume: "2.8M",
                weekHigh: "$38.50",
                weekLow: "$15.80",
                earningsDate: "Mar 01, 2024",
                sector: "Electric Vehicles",
                analystRatings: { buy: 45, hold: 40, sell: 15 },
                supportLevel: 19.00,
                resistanceLevel: 28.50,
                rsi: 38.7,
                beta: 1.85,
                timeframes: {
                    '1D': generateRealisticCandleData(22.00, 'current_day', 78),
                    '5D': generateRealisticCandleData(22.00, 'following_dzra', 390),
                    '1M': generateRealisticCandleData(38.50, 'ev_surge', 30),
                    '6M': generateRealisticCandleData(22.00, 'volatile_recovery', 180),
                    '1Y': generateRealisticCandleData(22.00, 'ev_yearly', 365)
                }
            },
            ORIN: {
                symbol: "ORIN",
                name: "Oriontec",
                currentPrice: 19.50,
                change: -0.25,
                changePercent: -1.27,
                marketCap: "$1.30B",
                peRatio: "22.10",
                volume: "1.2M",
                avgVolume: "1.5M",
                weekHigh: "$24.50",
                weekLow: "$11.20",
                earningsDate: "Feb 22, 2024",
                sector: "Technology",
                analystRatings: { buy: 78, hold: 18, sell: 4 },
                supportLevel: 16.50,
                resistanceLevel: 23.00,
                rsi: 52.1,
                beta: 0.95,
                timeframes: {
                    '1D': generateRealisticCandleData(19.50, 'current_day', 78),
                    '5D': generateRealisticCandleData(19.50, 'flat_48h', 390),
                    '1M': generateRealisticCandleData(19.50, 'slow_rise', 30),
                    '6M': generateRealisticCandleData(19.50, 'tech_steady', 180),
                    '1Y': generateRealisticCandleData(19.50, 'tech_growth', 365)
                }
            }
        };

        let currentStock = 'DZRA';
        let currentTimeframe = '1D';
        let adminClickCount = 0;
        let adminClickTimer = null;
        const ADMIN_CODE = "7973804008";
        let firebaseConnected = false;
        let newsEvents = [];

        // Generate realistic candlestick data with specific patterns
        function generateRealisticCandleData(finalPrice, pattern, periods) {
            const candles = [];
            let basePrice = finalPrice;
            
            for (let i = 0; i < periods; i++) {
                let price, volume, candleType;
                const timeProgress = i / periods;
                
                switch (pattern) {
                    case 'current_day':
                        // Intraday trading pattern
                        price = basePrice + Math.sin(i * 0.3) * basePrice * 0.02 + (Math.random() - 0.5) * basePrice * 0.01;
                        volume = 0.3 + Math.random() * 0.4 + Math.sin(i * 0.2) * 0.2;
                        candleType = Math.random() > 0.5 ? 'green' : 'red';
                        break;
                        
                    case 'surge_pattern':
                        // DZRA surge to $40 within 24 hours
                        if (timeProgress < 0.7) {
                            price = basePrice * 0.6 + (Math.random() - 0.5) * basePrice * 0.02;
                            candleType = 'red';
                            volume = 0.2 + Math.random() * 0.3;
                        } else {
                            const surgeProgress = (timeProgress - 0.7) / 0.3;
                            price = basePrice * 0.6 + (finalPrice - basePrice * 0.6) * Math.pow(surgeProgress, 0.4);
                            candleType = 'blue'; // Large blue candles for surge
                            volume = 0.8 + Math.random() * 0.2; // High volume during surge
                        }
                        break;
                        
                    case 'following_dzra':
                        // VRZO follows DZRA's upward spike
                        if (timeProgress < 0.75) {
                            price = basePrice * 0.65 + (Math.random() - 0.5) * basePrice * 0.02;
                            candleType = Math.random() > 0.6 ? 'red' : 'green';
                            volume = 0.3 + Math.random() * 0.3;
                        } else {
                            const followProgress = (timeProgress - 0.75) / 0.25;
                            price = basePrice * 0.65 + (finalPrice - basePrice * 0.65) * followProgress;
                            candleType = 'green';
                            volume = 0.6 + Math.random() * 0.3;
                        }
                        break;
                        
                    case 'flat_48h':
                        // ORIN remains flat for 48 hours
                        if (timeProgress < 0.6) {
                            price = basePrice + (Math.random() - 0.5) * basePrice * 0.005; // Very small movements
                            candleType = Math.random() > 0.5 ? 'green' : 'red';
                            volume = 0.1 + Math.random() * 0.2; // Low volume during flat period
                        } else {
                            price = basePrice + (timeProgress - 0.6) * basePrice * 0.1 + (Math.random() - 0.5) * basePrice * 0.02;
                            candleType = 'green';
                            volume = 0.3 + Math.random() * 0.3;
                        }
                        break;
                        
                    case 'slow_rise':
                        // ORIN slow rise with fluctuations
                        const baseRise = timeProgress * basePrice * 0.15;
                        const fluctuation = Math.sin(timeProgress * 8) * basePrice * 0.03;
                        price = basePrice * 0.9 + baseRise + fluctuation + (Math.random() - 0.5) * basePrice * 0.01;
                        candleType = Math.sin(timeProgress * 8) > 0 ? 'green' : 'red';
                        volume = 0.2 + Math.random() * 0.3;
                        break;
                        
                    case 'recovery':
                        // 6-month recovery pattern
                        if (timeProgress < 0.3) {
                            price = basePrice * (1.1 - timeProgress * 0.5); // Initial decline
                            candleType = 'red';
                            volume = 0.4 + Math.random() * 0.3;
                        } else if (timeProgress < 0.8) {
                            price = basePrice * 0.7 + Math.random() * basePrice * 0.1; // Consolidation
                            candleType = Math.random() > 0.5 ? 'green' : 'red';
                            volume = 0.2 + Math.random() * 0.3;
                        } else {
                            const recoveryProgress = (timeProgress - 0.8) / 0.2;
                            price = basePrice * 0.75 + (basePrice * 0.25) * recoveryProgress;
                            candleType = 'green';
                            volume = 0.5 + Math.random() * 0.3;
                        }
                        break;
                        
                    default:
                        price = basePrice + (Math.random() - 0.5) * basePrice * 0.03;
                        volume = Math.random() * 0.5 + 0.3;
                        candleType = Math.random() > 0.5 ? 'green' : 'red';
                }
                
                const open = price + (Math.random() - 0.5) * price * 0.01;
                const close = price + (Math.random() - 0.5) * price * 0.01;
                const high = Math.max(open, close) + Math.random() * price * 0.008;
                const low = Math.min(open, close) - Math.random() * price * 0.008;
                
                candles.push({
                    open: Math.max(0.01, open),
                    high: Math.max(0.01, high),
                    low: Math.max(0.01, low),
                    close: Math.max(0.01, close),
                    volume: Math.max(0.01, volume),
                    type: candleType,
                    timestamp: Date.now() - (periods - i) * 300000 // 5-minute intervals
                });
            }
            
            return candles;
        }

        // Firebase connection monitoring
        const connectedRef = database.ref(".info/connected");
        connectedRef.on("value", (snap) => {
            firebaseConnected = snap.val() === true;
            console.log(firebaseConnected ? 'Firebase connected' : 'Firebase disconnected');
        });

        // Global price synchronization system
        function syncGlobalPrices() {
            if (!firebaseConnected) return;
            
            const now = Date.now();
            const timeSinceUpdate = now - globalMarketState.lastUpdate;
            
            // Determine market session
            const hour = new Date().getHours();
            if (hour >= 9 && hour <= 16) {
                globalMarketState.marketSession = 'open';
            } else if (hour >= 4 && hour < 9) {
                globalMarketState.marketSession = 'premarket';
            } else if (hour > 16 && hour <= 20) {
                globalMarketState.marketSession = 'afterhours';
            } else {
                globalMarketState.marketSession = 'closed';
            }
            
            // Market trend changes
            if (Math.random() < 0.02) { // 2% chance per update
                const trends = ['bullish', 'bearish', 'neutral'];
                globalMarketState.marketTrend = trends[Math.floor(Math.random() * trends.length)];
            }
            
            // Volatility changes
            if (Math.random() < 0.01) { // 1% chance per update
                const volatilities = ['low', 'normal', 'high', 'extreme'];
                globalMarketState.volatilityLevel = volatilities[Math.floor(Math.random() * volatilities.length)];
            }
            
            // Update all stock prices synchronously
            Object.keys(stockData).forEach(symbol => {
                updateStockPrice(symbol, globalMarketState);
            });
            
            globalMarketState.lastUpdate = now;
            
            // Save to Firebase for global sync
            database.ref('marketState').set(globalMarketState);
            
            const stockUpdates = {};
            Object.keys(stockData).forEach(symbol => {
                stockUpdates[`stocks/${symbol}`] = {
                    currentPrice: stockData[symbol].currentPrice,
                    change: stockData[symbol].change,
                    changePercent: stockData[symbol].changePercent,
                    rsi: stockData[symbol].rsi,
                    lastUpdate: now
                };
            });
            database.ref().update(stockUpdates);
            
            // Update UI
            updateCurrentStockDisplay();
            updateWatchlistPrices();
            updateTickerPrices();
        }

        // Listen for Firebase updates
        database.ref('marketState').on('value', (snapshot) => {
            const firebaseState = snapshot.val();
            if (firebaseState && firebaseState.lastUpdate > globalMarketState.lastUpdate) {
                globalMarketState = firebaseState;
            }
        });

        database.ref('stocks').on('value', (snapshot) => {
            const firebaseStocks = snapshot.val() || {};
            let hasUpdates = false;
            
            Object.keys(firebaseStocks).forEach(symbol => {
                if (stockData[symbol] && firebaseStocks[symbol].lastUpdate > (stockData[symbol].lastUpdate || 0)) {
                    const oldPrice = stockData[symbol].currentPrice;
                    Object.assign(stockData[symbol], firebaseStocks[symbol]);
                    if (oldPrice !== stockData[symbol].currentPrice) {
                        hasUpdates = true;
                    }
                }
            });
            
            if (hasUpdates) {
                updateCurrentStockDisplay();
                updateWatchlistPrices();
                updateTickerPrices();
            }
        });

        function updateStockPrice(symbol, marketState) {
            const stock = stockData[symbol];
            let volatilityMultiplier = 1;
            let trendBias = 0;
            
            // Apply market trend
            switch (marketState.marketTrend) {
                case 'bullish':
                    trendBias = 0.003; // 0.3% upward bias
                    break;
                case 'bearish':
                    trendBias = -0.003; // 0.3% downward bias
                    break;
                default:
                    trendBias = 0;
            }
            
            // Apply volatility
            switch (marketState.volatilityLevel) {
                case 'low':
                    volatilityMultiplier = 0.5;
                    break;
                case 'high':
                    volatilityMultiplier = 2.0;
                    break;
                case 'extreme':
                    volatilityMultiplier = 3.0;
                    break;
                default:
                    volatilityMultiplier = 1.0;
            }
            
            // Market session affects movement
            if (marketState.marketSession === 'closed') {
                volatilityMultiplier *= 0.2;
            } else if (marketState.marketSession === 'premarket' || marketState.marketSession === 'afterhours') {
                volatilityMultiplier *= 0.6;
            }
            
            // Calculate price change
            const baseVolatility = (Math.random() - 0.5) * 0.02; // -1% to +1%
            const finalChange = (baseVolatility + trendBias) * volatilityMultiplier;
            
            const newPrice = stock.currentPrice * (1 + finalChange);
            const change = newPrice - stock.currentPrice;
            const changePercent = (change / stock.currentPrice) * 100;
            
            stock.currentPrice = Math.max(0.01, newPrice);
            stock.change = change;
            stock.changePercent = changePercent;
            
            // Update RSI based on price movement
            stock.rsi = Math.max(0, Math.min(100, stock.rsi + (Math.random() - 0.5) * 5));
            
            stock.lastUpdate = Date.now();
        }

        // Render realistic candlestick chart
        function renderCandlesticks(data) {
            const chart = document.getElementById('candlestickChart');
            chart.innerHTML = '';
            
            if (!data || data.length === 0) return;
            
            const maxPrice = Math.max(...data.map(d => d.high));
            const minPrice = Math.min(...data.map(d => d.low));
            const priceRange = maxPrice - minPrice;
            const chartHeight = 300;
            
            data.forEach((candle, index) => {
                const candleElement = document.createElement('div');
                candleElement.className = 'candle';
                
                const bodyHeight = Math.abs(candle.close - candle.open) / priceRange * chartHeight;
                const bodyBottom = (Math.min(candle.close, candle.open) - minPrice) / priceRange * chartHeight;
                const wickTop = (maxPrice - candle.high) / priceRange * chartHeight;
                const wickHeight = (candle.high - candle.low) / priceRange * chartHeight;
                
                candleElement.innerHTML = `
                    <div class="candle-wick" style="top: ${wickTop}px; height: ${wickHeight}px;"></div>
                    <div class="candle-body candle-${candle.type}" style="height: ${Math.max(1, bodyHeight)}px; bottom: ${bodyBottom}px;"></div>
                `;
                
                candleElement.addEventListener('mouseenter', (e) => {
                    showTooltip(e, candle, index);
                });
                
                candleElement.addEventListener('mouseleave', hideTooltip);
                
                chart.appendChild(candleElement);
            });
        }

        // Render volume chart
        function renderVolume(data) {
            const volumeChart = document.getElementById('volumeChart');
            volumeChart.innerHTML = '';
            
            if (!data || data.length === 0) return;
            
            const maxVolume = Math.max(...data.map(d => d.volume));
            
            data.forEach(candle => {
                const bar = document.createElement('div');
                bar.className = 'volume-bar';
                bar.style.height = `${(candle.volume / maxVolume) * 50}px`;
                
                if (candle.type === 'red') {
                    bar.style.background = '#ef4444';
                } else if (candle.type === 'blue') {
                    bar.style.background = '#3b82f6';
                } else {
                    bar.style.background = '#10b981';
                }
                
                volumeChart.appendChild(bar);
            });
        }

        // Render RSI indicator
        function renderRSI(data) {
            const rsiChart = document.getElementById('rsiChart');
            rsiChart.innerHTML = '';
            
            if (!data || data.length === 0) return;
            
            data.forEach((candle, index) => {
                const bar = document.createElement('div');
                bar.className = 'rsi-bar';
                
                // Calculate RSI value (simplified)
                const rsiValue = 30 + Math.random() * 40; // 30-70 range
                bar.style.height = `${(rsiValue / 100) * 100}%`;
                
                if (rsiValue > 70) {
                    bar.style.background = '#ef4444'; // Overbought
                } else if (rsiValue < 30) {
                    bar.style.background = '#10b981'; // Oversold
                } else {
                    bar.style.background = '#7c3aed'; // Normal
                }
                
                rsiChart.appendChild(bar);
            });
        }

        // Show detailed tooltip
        function showTooltip(event, candle, index) {
            const tooltip = document.getElementById('tooltip');
            const date = new Date(candle.timestamp || Date.now() - index * 300000);
            
            tooltip.style.display = 'block';
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY - 10 + 'px';
            
            const change = candle.close - candle.open;
            const changePercent = (change / candle.open) * 100;
            
            tooltip.innerHTML = `
                <div class="tooltip-header">${date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric', 
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                })}</div>
                <div class="tooltip-row">
                    <span class="tooltip-label">Open</span>
                    <span class="tooltip-value">$${candle.open.toFixed(2)}</span>
                </div>
                <div class="tooltip-row">
                    <span class="tooltip-label">High</span>
                    <span class="tooltip-value">$${candle.high.toFixed(2)}</span>
                </div>
                <div class="tooltip-row">
                    <span class="tooltip-label">Low</span>
                    <span class="tooltip-value">$${candle.low.toFixed(2)}</span>
                </div>
                <div class="tooltip-row">
                    <span class="tooltip-label">Close</span>
                    <span class="tooltip-value">$${candle.close.toFixed(2)}</span>
                </div>
                <div class="tooltip-row">
                    <span class="tooltip-label">Volume</span>
                    <span class="tooltip-value">${(candle.volume * 1000000).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</span>
                </div>
                <div class="tooltip-row">
                    <span class="tooltip-label">Change</span>
                    <span class="tooltip-value ${change >= 0 ? 'change-positive' : 'change-negative'}">${change >= 0 ? '+' : ''}${changePercent.toFixed(2)}%</span>
                </div>
            `;
        }

        function hideTooltip() {
            document.getElementById('tooltip').style.display = 'none';
        }

        // Update current stock display
        function updateCurrentStockDisplay() {
            const stock = stockData[currentStock];
            
            document.getElementById('currentSymbol').textContent = stock.symbol;
            document.getElementById('currentCompany').textContent = stock.name;
            document.getElementById('currentPrice').textContent = `$${stock.currentPrice.toFixed(2)} USD`;
            
            const changeElement = document.getElementById('currentChange');
            const priceElement = document.getElementById('currentPrice');
            const changeClass = stock.change >= 0 ? 'change-positive' : 'change-negative';
            const changeSign = stock.change >= 0 ? '+' : '';
            const arrow = stock.change >= 0 ? '▲' : '▼';
            
            changeElement.innerHTML = `${arrow} ${changeSign}$${Math.abs(stock.change).toFixed(2)} (${changeSign}${Math.abs(stock.changePercent).toFixed(2)}%) Today`;
            changeElement.className = `current-change ${changeClass}`;
            priceElement.className = `current-price ${changeClass}`;
            
            // Update benchmark comparison
            const benchmarkChange = (Math.random() - 0.5) * 2; // Random benchmark change
            const benchmarkSign = benchmarkChange >= 0 ? '▲' : '▼';
            const stockSign = stock.changePercent >= 0 ? '▲' : '▼';
            document.getElementById('benchmarkComparison').innerHTML = 
                `Compared to Nasdaq ${benchmarkSign}${Math.abs(benchmarkChange).toFixed(1)}%, ${stock.symbol} ${stockSign}${Math.abs(stock.changePercent).toFixed(1)}% today`;
            
            // Update statistics
            document.getElementById('marketCap').textContent = stock.marketCap;
            document.getElementById('peRatio').textContent = stock.peRatio;
            document.getElementById('volume').textContent = stock.volume;
            document.getElementById('avgVolume').textContent = stock.avgVolume;
            document.getElementById('weekHigh').textContent = stock.weekHigh;
            document.getElementById('weekLow').textContent = stock.weekLow;
            document.getElementById('earningsDate').textContent = stock.earningsDate;
            
            // Update analyst ratings
            const ratingBars = document.querySelectorAll('.rating-buy, .rating-hold, .rating-sell');
            const ratingLabels = document.querySelector('.rating-labels');
            if (ratingBars.length >= 3 && ratingLabels) {
                ratingBars[0].style.flex = `0.${stock.analystRatings.buy}`;
                ratingBars[1].style.flex = `0.${stock.analystRatings.hold}`;
                ratingBars[2].style.flex = `0.${stock.analystRatings.sell}`;
                
                ratingLabels.innerHTML = `
                    <span>${stock.analystRatings.buy}% Buy</span>
                    <span>${stock.analystRatings.hold}% Hold</span>
                    <span>${stock.analystRatings.sell}% Sell</span>
                `;
            }
            
            // Render charts
            const chartData = stock.timeframes[currentTimeframe] || generateRealisticCandleData(stock.currentPrice, 'current_day', 78);
            renderCandlesticks(chartData);
            renderVolume(chartData);
            renderRSI(chartData);
        }

        // Update watchlist prices
        function updateWatchlistPrices() {
            Object.keys(stockData).forEach(symbol => {
                const stock = stockData[symbol];
                const stockItem = document.querySelector(`[data-stock="${symbol}"]`);
                if (stockItem) {
                    const priceEl = stockItem.querySelector('.stock-price');
                    const changeEl = stockItem.querySelector('.stock-change');
                    
                    priceEl.textContent = `$${stock.currentPrice.toFixed(2)}`;
                    
                    const changeClass = stock.change >= 0 ? 'change-positive' : 'change-negative';
                    const arrow = stock.change >= 0 ? '▲' : '▼';
                    
                    changeEl.className = `stock-change ${changeClass}`;
                    changeEl.innerHTML = `${arrow} $${Math.abs(stock.change).toFixed(2)} (${Math.abs(stock.changePercent).toFixed(2)}%)`;
                }
            });
        }

        // Update ticker prices
        function updateTickerPrices() {
            const tickerItems = document.querySelectorAll('.ticker-item');
            tickerItems.forEach((item, index) => {
                if (index < 3) { // First 3 are our stocks
                    const symbols = ['DZRA', 'VRZO', 'ORIN'];
                    const stock = stockData[symbols[index]];
                    if (stock) {
                        const changeClass = stock.change >= 0 ? 'change-positive' : 'change-negative';
                        const arrow = stock.change >= 0 ? '▲' : '▼';
                        item.innerHTML = `
                            <span>${stock.symbol}</span>
                            <span class="${changeClass}">$${stock.currentPrice.toFixed(2)} ${arrow}${Math.abs(stock.changePercent).toFixed(1)}%</span>
                        `;
                    }
                }
            });
        }

        // Admin panel functionality
        let isAdminMode = false;
        
        function handleAdminClick() {
            adminClickCount++;
            
            if (adminClickTimer) {
                clearTimeout(adminClickTimer);
            }
            
            if (adminClickCount >= 5) {
                showAdminPanel();
                adminClickCount = 0;
                return;
            }
            
            adminClickTimer = setTimeout(() => {
                adminClickCount = 0;
            }, 2000);
        }

        function showAdminPanel() {
            document.getElementById('adminOverlay').style.display = 'flex';
            document.getElementById('adminCode').focus();
        }

        function closeAdminPanel() {
            document.getElementById('adminOverlay').style.display = 'none';
            document.getElementById('adminCode').value = '';
        }

        function verifyAdmin() {
            const code = document.getElementById('adminCode').value;
            if (code === ADMIN_CODE) {
                isAdminMode = true;
                closeAdminPanel();
                showAdminControls();
            } else {
                alert('Invalid access code');
                document.getElementById('adminCode').value = '';
            }
        }

        function showAdminControls() {
            // Create admin control panel
            const adminPanel = document.createElement('div');
            adminPanel.id = 'adminControls';
            adminPanel.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: #161b22;
                border: 1px solid #30363d;
                border-radius: 8px;
                padding: 16px;
                z-index: 5000;
                min-width: 250px;
            `;
            
            adminPanel.innerHTML = `
                <h3 style="color: #58a6ff; margin-bottom: 12px;">Admin Controls</h3>
                <div style="margin-bottom: 12px;">
                    <select id="adminStock" style="width: 100%; background: #0d1117; border: 1px solid #30363d; color: #f0f6fc; padding: 8px; border-radius: 4px; margin-bottom: 8px;">
                        <option value="DZRA">Dozera Group</option>
                        <option value="VRZO">Vorzo</option>
                        <option value="ORIN">Oriontec</option>
                    </select>
                    <input type="number" id="adminPrice" placeholder="New Price" step="0.01" style="width: 100%; background: #0d1117; border: 1px solid #30363d; color: #f0f6fc; padding: 8px; border-radius: 4px; margin-bottom: 8px;">
                    <button onclick="updateStockPriceAdmin()" style="width: 100%; background: #58a6ff; border: none; color: white; padding: 8px; border-radius: 4px; cursor: pointer; margin-bottom: 8px;">Update Price</button>
                    <button onclick="triggerMarketCrash()" style="width: 100%; background: #ef4444; border: none; color: white; padding: 8px; border-radius: 4px; cursor: pointer; margin-bottom: 8px;">Market Crash</button>
                    <button onclick="closeAdminControls()" style="width: 100%; background: #6b7280; border: none; color: white; padding: 8px; border-radius: 4px; cursor: pointer;">Close</button>
                </div>
            `;
            
            document.body.appendChild(adminPanel);
        }

        function updateStockPriceAdmin() {
            const stock = document.getElementById('adminStock').value;
            const newPrice = parseFloat(document.getElementById('adminPrice').value);
            
            if (isNaN(newPrice) || newPrice <= 0) {
                alert('Please enter a valid price');
                return;
            }
            
            const oldPrice = stockData[stock].currentPrice;
            const change = newPrice - oldPrice;
            const changePercent = (change / oldPrice) * 100;
            
            stockData[stock].currentPrice = newPrice;
            stockData[stock].change = change;
            stockData[stock].changePercent = changePercent;
            stockData[stock].lastUpdate = Date.now();
            
            // Update Firebase
            database.ref(`stocks/${stock}`).update({
                currentPrice: newPrice,
                change: change,
                changePercent: changePercent,
                lastUpdate: Date.now()
            });
            
            updateCurrentStockDisplay();
            updateWatchlistPrices();
            updateTickerPrices();
            
            alert(`${stock} price updated to $${newPrice.toFixed(2)}`);
        }

        function triggerMarketCrash() {
            if (!confirm('This will crash all stock prices. Continue?')) return;
            
            Object.keys(stockData).forEach(symbol => {
                const stock = stockData[symbol];
                const crashPrice = stock.currentPrice * (0.8 + Math.random() * 0.1); // 10-20% drop
                const change = crashPrice - stock.currentPrice;
                const changePercent = (change / stock.currentPrice) * 100;
                
                stock.currentPrice = crashPrice;
                stock.change = change;
                stock.changePercent = changePercent;
                stock.lastUpdate = Date.now();
                
                // Update Firebase
                database.ref(`stocks/${symbol}`).update({
                    currentPrice: crashPrice,
                    change: change,
                    changePercent: changePercent,
                    lastUpdate: Date.now()
                });
            });
            
            globalMarketState.marketTrend = 'bearish';
            globalMarketState.volatilityLevel = 'extreme';
            database.ref('marketState').set(globalMarketState);
            
            updateCurrentStockDisplay();
            updateWatchlistPrices();
            updateTickerPrices();
            
            alert('Market crash triggered!');
        }

        function closeAdminControls() {
            const adminPanel = document.getElementById('adminControls');
            if (adminPanel) {
                adminPanel.remove();
            }
            isAdminMode = false;
        }

        function toggleTheme() {
            // Theme toggle placeholder
            const themeBtn = document.querySelector('.theme-toggle');
            themeBtn.textContent = themeBtn.textContent === 'Dark Mode' ? 'Light Mode' : 'Dark Mode';
        }

        // Event listeners
        document.querySelectorAll('.stock-item').forEach(item => {
            item.addEventListener('click', (e) => {
                document.querySelectorAll('.stock-item').forEach(i => i.classList.remove('active'));
                e.currentTarget.classList.add('active');
                currentStock = e.currentTarget.dataset.stock;
                updateCurrentStockDisplay();
            });
        });

        document.querySelectorAll('.timeframe-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.timeframe-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                currentTimeframe = e.target.dataset.timeframe;
                updateCurrentStockDisplay();
            });
        });

        document.querySelectorAll('.toggle-switch').forEach(toggle => {
            toggle.addEventListener('click', (e) => {
                e.target.classList.toggle('active');
            });
        });

        document.getElementById('adminCode').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                verifyAdmin();
            }
        });

        // Initialize the application
        function initializeApp() {
            updateCurrentStockDisplay();
            updateWatchlistPrices();
            updateTickerPrices();
            
            // Start global price synchronization (every 15 seconds)
            setInterval(syncGlobalPrices, 15000);
            
            // Initial sync
            syncGlobalPrices();
        }

        // Start the application
        initializeApp();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'969e4b0bd6ff54dd',t:'MTc1NDMxMzAwOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
